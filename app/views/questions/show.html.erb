<% previous_question = @question.previous_question %>
<% next_question = @question.next_question %>
<div class="float-right">
  <%= link_to fa("arrow-left") + " Previous", previous_question, class: "btn btn-outline-primary #{ previous_question ? "" : "disabled" }" %>
  <%= link_to fa("arrow-right") + " Next", next_question, class: "btn btn-outline-primary #{ next_question ? "" : "disabled" }" %>
  <%= link_to fa("arrow-up"), @question.quiz, class: "btn btn-outline-primary" %>
</div>
<h2><%= @question %></h2>

<p>
  <strong>Quiz</strong>
  <%= @question.quiz %>
</p>

<p>
  <strong>Template</strong>
  <%= @question.template.to_s.humanize %>
</p>

<p>
  <strong>Ask</strong>
  <%= strip_tags( markdown @question.ask ) %>
</p>

<p>
  <strong>Answer</strong>
  <%= @question.answer %>
</p>

<p>
  <strong>Explanation</strong>
  <%= strip_tags( markdown @question.explanation ) %>
</p>

<p>
  <strong>Points</strong>
  <%= @question.points %>
</p>

<div class="collapse" id="questionAdvancedDetailCollapse">
  <strong>Config</strong>
  <pre><%= @question.config_as_yaml %></pre>

  <strong>Scoring</strong>
  <pre><%= @question.scoring %></pre>
</div>

<button class="btn btn-outline-dark" type="button" data-toggle="collapse" data-target="#questionAdvancedDetailCollapse" title="Detail">
  <%= fa "ellipsis-h" %>
</button>

<%= link_to fa("edit") + ' Edit', edit_question_path(@question), class: "btn btn-outline-primary #{ @question.quiz.queued? ? 'disabled' : '' }" %>
<%= link_to fa("vial") + ' Test', new_question_test_path(@question), class: "btn btn-outline-primary" %>

<div class="float-right">
  <div class="dropdown d-inline-block">
    <button class="btn btn-outline-primary dropdown-toggle"
      data-toggle="dropdown">
      <%= fa("arrows-alt-v") + " Move" %>
    </button>
    <div class="dropdown-menu" aria-labelledby="questionMoveMenu">
      <%= button_to question_moveup_path(@question),
      disabled: @question.previous_question ? nil : 'disabled',
      class: "dropdown-item #{
        @question.previous_question ? '' : 'disabled'
      }" do %>
        <%= fa("arrow-up") + ' Up' %>
      <% end %>
      <%= button_to question_movedown_path(@question),
      disabled: @question.next_question ? nil : 'disabled',
      class: "dropdown-item #{
        @question.next_question ? '' : 'disabled'
      }" do %>
        <%= fa("arrow-down") + ' Down' %>
      <% end %>
    </div>
  </div>
  <%= link_to fa("crop") + ' Template',
  edit_question_template_path(@question),
  class: "btn btn-outline-info" %>
  <%= link_to fa("trash") + ' Delete',
  question_path(@question),
  method: :DELETE,
  data: { confirm:
    "Are you sure that you want to delete this question?"
  },
  class: "btn btn-outline-danger #{
    @question.quiz.queued? ? 'disabled' : ''
  }" %>
</div>

<hr>
<%= render 'questions/files', question: @question %>
